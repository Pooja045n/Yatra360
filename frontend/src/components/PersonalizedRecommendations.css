/* Root layout */
.personalized-recommendations-section { position:relative; margin:3.5rem 0 3.2rem; width:100%; }
.personalized-recommendations-section .rec-bg-layer { position:absolute; inset:0; background-size:cover; background-position:center center; background-repeat:no-repeat; }
.personalized-recommendations-section .rec-bg-overlay { position:absolute; inset:0; background:linear-gradient(180deg, rgba(0,0,0,0.25) 0%, rgba(0,0,0,0.15) 40%, rgba(0,0,0,0.15) 60%, rgba(0,0,0,0.3) 100%); pointer-events:none; }
.personalized-recommendations-section .rec-inner { position:relative; z-index:2; padding:3.2rem 1rem 3rem; max-width:1400px; margin:0 auto; }
.personalized-recommendations { position:relative; }

@media (min-width: 840px) {
  .personalized-recommendations-section .rec-inner { padding:4.2rem 2rem 4rem; }
}

@media (max-width: 780px) {
  .bg-personalized { padding:1.9rem 1rem 2.2rem; border-radius:28px; }
}

/* Header & Filters */
.recommendations-header { text-align:left; margin-bottom:1.75rem; }
.recommendations-header h2 { margin:0 0 .4rem; font-size:1.9rem; font-weight:700; letter-spacing:.5px; background:linear-gradient(90deg,#0f172a,#334155,#0f172a); -webkit-background-clip:text; background-clip:text; color:transparent; }
.recommendations-header p { margin:.2rem 0 0; color:#475569; font-size:.95rem; font-weight:400; letter-spacing:.25px; }
.recommendation-filters { display:flex; flex-wrap:wrap; gap:.65rem; margin-top:1.1rem; }
.filter-btn { --accent:71,85,105; position:relative; display:inline-flex; align-items:center; gap:.55rem; padding:.65rem .9rem .6rem; font-size:.7rem; letter-spacing:1px; font-weight:600; text-transform:uppercase; border:1px solid rgba(var(--accent),0.35); border-radius:14px; background:linear-gradient(140deg, rgba(var(--accent),0.08), rgba(var(--accent),0.02)); color:#334155; cursor:pointer; transition: all .45s cubic-bezier(.4,.2,.2,1); backdrop-filter:blur(10px) saturate(140%); }
.filter-btn .filter-dot { width:.55rem; height:.55rem; border-radius:50%; background:radial-gradient(circle at 30% 30%, rgba(var(--accent),0.9), rgba(var(--accent),0.35)); box-shadow:0 0 0 1px rgba(var(--accent),0.4), 0 0 0 4px rgba(var(--accent),0.15); }
.filter-btn.active { background:linear-gradient(140deg, rgba(var(--accent),0.75), rgba(var(--accent),0.55)); color:#fff; box-shadow:0 4px 14px -4px rgba(var(--accent),0.55), 0 2px 6px -2px rgba(var(--accent),0.4); border-color:rgba(var(--accent),0.55); }
.filter-btn:not(.active):hover { border-color:rgba(var(--accent),0.55); background:linear-gradient(140deg, rgba(var(--accent),0.14), rgba(var(--accent),0.05)); }

/* Grid */
.recommendations-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:1.4rem; }

/* Card */
.recommendation-card { position:relative; display:flex; flex-direction:column; background:rgba(255,255,255,0.9); border-radius:26px; box-shadow:0 10px 30px -12px rgba(0,0,0,0.22),0 4px 14px -6px rgba(0,0,0,0.15); overflow:hidden; transition: all .55s cubic-bezier(.4,.2,.2,1); border:1px solid rgba(0,0,0,0.06); }
.recommendation-card::before { content:""; position:absolute; inset:0; background:linear-gradient(140deg, rgba(255,255,255,0.65) 0%, rgba(255,255,255,0.35) 65%, rgba(255,255,255,0.15) 100%); pointer-events:none; }
.recommendation-card:hover { transform:translateY(-8px) scale(1.015); box-shadow:0 22px 48px -16px rgba(0,0,0,0.32),0 8px 20px -10px rgba(0,0,0,0.22); }
.recommendation-card .rec-media { position:relative; height:155px; overflow:hidden; }
.recommendation-card .rec-media img { width:100%; height:100%; object-fit:cover; filter:saturate(115%) contrast(.98); transition: transform 1s ease, filter .7s ease; }
.recommendation-card:hover .rec-media img { transform:scale(1.08); filter:saturate(130%) contrast(1.03); }
.rec-overlay { position:absolute; inset:0; background:rgba(var(--accent),0.22); mix-blend-mode:multiply; }
.rec-gradient { position:absolute; inset:0; background:linear-gradient(180deg, rgba(0,0,0,0.52) 0%, rgba(0,0,0,0.32) 45%, rgba(0,0,0,0.05) 100%); }
.rec-badges { position:absolute; top:12px; left:12px; right:12px; display:flex; justify-content:space-between; align-items:flex-start; gap:.5rem; z-index:2; }
.rec-type-badge { display:inline-flex; align-items:center; gap:4px; font-size:.6rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; padding:.4rem .55rem .35rem; border-radius:10px; background:linear-gradient(140deg, rgba(var(--accent),0.9), rgba(var(--accent),0.6)); color:#fff; text-shadow:0 1px 2px rgba(0,0,0,0.35); box-shadow:0 3px 8px -3px rgba(var(--accent),0.65),0 0 0 1px rgba(255,255,255,0.18); backdrop-filter:blur(6px); }
.rec-score { position:relative; display:inline-flex; align-items:center; justify-content:center; }
.score-ring { --size:46px; width:var(--size); height:var(--size); border-radius:50%; background:conic-gradient(#0f172a 0deg,#334155 0deg); display:flex; align-items:center; justify-content:center; position:relative; box-shadow:0 4px 10px -4px rgba(var(--accent),0.65),0 0 0 1px rgba(255,255,255,0.25); }
.score-ring::after { content:""; position:absolute; inset:5px; background:linear-gradient(145deg, rgba(255,255,255,0.9), rgba(255,255,255,0.15)); border-radius:50%; box-shadow:inset 0 2px 4px rgba(0,0,0,0.22), 0 0 0 1px rgba(255,255,255,0.15); }
.score-text { position:absolute; font-size:.65rem; font-weight:700; letter-spacing:.75px; background:linear-gradient(180deg,#0f172a,#334155); -webkit-background-clip:text; background-clip:text; color:transparent; display:flex; align-items:flex-start; gap:1px; }
.score-text .pct { font-size:.5rem; font-weight:600; margin-left:1px; }

/* Content */
.card-content { padding:1.05rem 1.1rem .9rem; display:flex; flex-direction:column; gap:.55rem; }
.destination-name { margin:0; font-size:1.1rem; font-weight:700; letter-spacing:.25px; color:#0f172a; }
.destination-title { margin:0; font-size:.75rem; font-weight:600; letter-spacing:.75px; text-transform:uppercase; color:#475569; opacity:.9; }
.destination-description { margin:.1rem 0 .35rem; font-size:.78rem; line-height:1.35; color:#334155; }
.tags-row { display:flex; flex-wrap:wrap; gap:.35rem; margin:0 0 .4rem; }
.mini-tag { font-size:.55rem; font-weight:600; letter-spacing:.75px; text-transform:uppercase; padding:.3rem .55rem .28rem; border-radius:24px; background:linear-gradient(145deg, rgba(var(--accent),0.85), rgba(var(--accent),0.6)); color:#fff; box-shadow:0 2px 6px -2px rgba(var(--accent),0.65),0 0 0 1px rgba(255,255,255,0.18); }
.mini-tag.alt { background:linear-gradient(145deg, rgba(15,23,42,0.85), rgba(30,41,59,0.7)); box-shadow:0 2px 6px -2px rgba(0,0,0,0.55),0 0 0 1px rgba(255,255,255,0.1); }
.recommendation-reasons { margin:.2rem 0 .3rem; }
.recommendation-reasons ul { margin:0; padding-left:1.05rem; display:grid; gap:.25rem; }
.recommendation-reasons li { font-size:.63rem; line-height:1.25; color:#334155; font-weight:500; position:relative; }

.destination-details { display:grid; grid-template-columns:repeat(auto-fill,minmax(90px,1fr)); gap:.4rem .6rem; margin-top:.2rem; }
.detail-item { display:flex; flex-direction:column; gap:2px; background:linear-gradient(160deg, rgba(255,255,255,0.75), rgba(255,255,255,0.4)); padding:.45rem .55rem .5rem; border-radius:14px; box-shadow:0 2px 5px -2px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.35); backdrop-filter:blur(6px); }
.detail-label { font-size:.5rem; letter-spacing:1px; font-weight:700; text-transform:uppercase; color:#64748b; }
.detail-value { font-size:.62rem; font-weight:600; color:#0f172a; }

/* Actions */
.card-actions { display:flex; gap:.6rem; padding:.8rem 1.1rem 1.1rem; margin-top:auto; }
.btn-primary, .btn-secondary { --btn-accent: var(--accent); position:relative; flex:1; display:inline-flex; justify-content:center; align-items:center; gap:.4rem; font-size:.65rem; letter-spacing:1px; font-weight:700; text-transform:uppercase; padding:.7rem .9rem .65rem; border-radius:16px; border:1px solid rgba(var(--btn-accent),0.45); cursor:pointer; transition: all .5s ease; backdrop-filter:blur(6px) saturate(140%); }
.btn-primary { background:linear-gradient(145deg, rgba(var(--btn-accent),0.9), rgba(var(--btn-accent),0.55)); color:#fff; box-shadow:0 4px 12px -4px rgba(var(--btn-accent),0.6),0 0 0 1px rgba(255,255,255,0.25); }
.btn-primary:hover { transform:translateY(-3px); box-shadow:0 8px 22px -8px rgba(var(--btn-accent),0.65),0 0 0 1px rgba(255,255,255,0.3); }
.btn-secondary { background:linear-gradient(145deg, rgba(15,23,42,0.85), rgba(30,41,59,0.7)); color:#e2e8f0; border-color:rgba(15,23,42,0.4); box-shadow:0 4px 12px -4px rgba(0,0,0,0.55),0 0 0 1px rgba(255,255,255,0.1); }
.btn-secondary:hover { transform:translateY(-3px); box-shadow:0 8px 22px -8px rgba(0,0,0,0.65),0 0 0 1px rgba(255,255,255,0.15); }

/* Skeleton Loading */
.skeleton-phase .recommendation-card { animation: fadeIn .6s ease; }
.skeleton-card { background:linear-gradient(110deg,#f1f5f9 8%,#e2e8f0 18%,#f1f5f9 33%); background-size:200% 100%; animation: shimmer 1.15s linear infinite; border:1px solid #e2e8f0; }
.skeleton-block { height:155px; background:rgba(255,255,255,0.4); }
.skeleton-line { height:10px; background:#e2e8f0; border-radius:6px; margin:.5rem 0 .15rem; }
.skeleton-line.w-60 { width:60%; }
.skeleton-line.w-40 { width:40%; }
.skeleton-line.w-90 { width:90%; }
.skeleton-line.w-80 { width:80%; }
.skeleton-tag-row { display:flex; gap:.4rem; margin-top:.3rem; }
.skeleton-pill { width:42px; height:14px; background:#e2e8f0; border-radius:18px; }
.skeleton-actions { display:flex; gap:.6rem; padding:.8rem 1.1rem 1.1rem; }
.skeleton-btn { flex:1; height:38px; background:#e2e8f0; border-radius:16px; }
@keyframes shimmer { to { background-position:-200% 0; } }
@keyframes fadeIn { from { opacity:0; transform:scale(.98); } to { opacity:1; transform:scale(1); } }

/* Info Section */
.recommendations-info { margin-top:2.8rem; }
.recommendations-info h3 { margin:0 0 1.2rem; font-size:1.4rem; font-weight:700; letter-spacing:.35px; background:linear-gradient(90deg,#0f172a,#334155,#0f172a); -webkit-background-clip:text; background-clip:text; color:transparent; }
.info-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(230px,1fr)); gap:1rem; }
.info-item { position:relative; padding:1.05rem 1rem 1rem; border-radius:22px; background:linear-gradient(150deg, rgba(255,255,255,0.75), rgba(255,255,255,0.55)); box-shadow:0 10px 26px -10px rgba(0,0,0,0.18),0 4px 12px -4px rgba(0,0,0,0.12); backdrop-filter:blur(14px) saturate(160%); border:1px solid rgba(255,255,255,0.4); transition: all .55s cubic-bezier(.35,.6,.3,1); }
.info-item:hover { transform:translateY(-6px); box-shadow:0 20px 38px -14px rgba(0,0,0,0.28),0 8px 24px -8px rgba(0,0,0,0.18); }
.info-item h4 { margin:0 0 .35rem; font-size:.85rem; font-weight:700; letter-spacing:.75px; text-transform:uppercase; color:#0f172a; }
.info-item p { margin:0; font-size:.7rem; line-height:1.4; color:#334155; }

/* Dark Mode */
@media (prefers-color-scheme: dark) {
  .recommendations-header h2, .recommendations-info h3 { background:linear-gradient(90deg,#f1f5f9,#cbd5e1,#f1f5f9); -webkit-background-clip:text; background-clip:text; }
  .recommendations-header p { color:#94a3b8; }
  .filter-btn { background:linear-gradient(140deg, rgba(var(--accent),0.25), rgba(var(--accent),0.1)); color:#e2e8f0; border-color:rgba(var(--accent),0.45); }
  .filter-btn.active { background:linear-gradient(140deg, rgba(var(--accent),0.85), rgba(var(--accent),0.6)); color:#fff; }
  .recommendation-card { background:rgba(30,41,59,0.9); border-color:rgba(255,255,255,0.08); }
  .recommendation-card::before { background:linear-gradient(140deg, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.08) 60%, rgba(255,255,255,0.04) 100%); }
  .destination-name { color:#f1f5f9; }
  .destination-title { color:#94a3b8; }
  .destination-description { color:#cbd5e1; }
  .mini-tag.alt { background:linear-gradient(145deg, rgba(148,163,184,0.85), rgba(100,116,139,0.7)); }
  .detail-value { color:#f1f5f9; }
  .detail-label { color:#94a3b8; }
  .btn-secondary { background:linear-gradient(145deg, rgba(51,65,85,0.9), rgba(30,41,59,0.75)); border-color:rgba(255,255,255,0.1); color:#f1f5f9; }
  .info-item { background:linear-gradient(150deg, rgba(30,41,59,0.78), rgba(30,41,59,0.55)); border-color:rgba(255,255,255,0.08); }
  .info-item h4 { color:#f1f5f9; }
  .info-item p { color:#cbd5e1; }
  .skeleton-card { background:linear-gradient(110deg,#1e293b 8%,#334155 18%,#1e293b 33%); border-color:#334155; }
  .skeleton-line, .skeleton-btn, .skeleton-pill { background:#334155; }
}

/* Responsive */
@media (max-width:640px) {
  .recommendations-header h2 { font-size:1.55rem; }
  .recommendations-grid { gap:1.05rem; }
  .recommendation-card { border-radius:22px; }
  .rec-type-badge { font-size:.55rem; }
  .score-ring { --size:42px; }
  .destination-name { font-size:1rem; }
}

/* Draft Banner & Toast */
.draft-itinerary-banner { margin:-.4rem 0 1.4rem; background:rgba(255,255,255,0.65); backdrop-filter:blur(10px) saturate(160%); -webkit-backdrop-filter:blur(10px) saturate(160%); border:1px solid rgba(255,255,255,0.5); border-radius:18px; padding:.75rem 1rem; display:flex; justify-content:space-between; align-items:center; font-size:.7rem; font-weight:500; color:#0f172a; gap:1rem; box-shadow:0 6px 20px -6px rgba(0,0,0,0.25); }
.view-draft-btn { background:linear-gradient(145deg,#0f172a,#334155); color:#fff; font-size:.6rem; letter-spacing:1px; text-transform:uppercase; font-weight:700; border:none; border-radius:14px; padding:.55rem .85rem .5rem; cursor:pointer; display:inline-flex; align-items:center; gap:4px; box-shadow:0 4px 12px -4px rgba(0,0,0,0.55),0 0 0 1px rgba(255,255,255,0.2); transition: all .45s ease; }
.view-draft-btn:hover { transform:translateY(-2px); box-shadow:0 8px 18px -8px rgba(0,0,0,0.55),0 0 0 1px rgba(255,255,255,0.25); }

.toast-container { position:fixed; bottom:1.4rem; right:1.4rem; z-index:1200; display:flex; flex-direction:column; gap:.7rem; }
.toast { min-width:240px; max-width:320px; background:linear-gradient(140deg, rgba(255,255,255,0.85), rgba(255,255,255,0.7)); backdrop-filter:blur(16px) saturate(180%); -webkit-backdrop-filter:blur(16px) saturate(180%); border:1px solid rgba(255,255,255,0.55); border-radius:20px; padding:.85rem 1rem .8rem; box-shadow:0 10px 28px -10px rgba(0,0,0,0.35),0 4px 12px -6px rgba(0,0,0,0.25); display:flex; align-items:flex-start; gap:.75rem; animation: toastIn .55s cubic-bezier(.35,.6,.3,1); position:relative; overflow:hidden; }
.toast::before { content:""; position:absolute; inset:0; background:linear-gradient(120deg, rgba(255,255,255,0.55), rgba(255,255,255,0.1)); pointer-events:none; }
.toast-message { font-size:.7rem; line-height:1.35; font-weight:600; color:#0f172a; }
.toast-close { background:rgba(0,0,0,0.06); border:none; width:26px; height:26px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; color:#334155; transition: background .35s ease; }
.toast-close:hover { background:rgba(0,0,0,0.13); }
.toast-bar { position:absolute; left:0; bottom:0; height:3px; background:linear-gradient(90deg,#0f172a,#334155,#0f172a); animation: toastBar 3.2s linear forwards; }
.toast[data-type="info"] { --accent:71,85,105; }
.toast[data-type="info"] .toast-bar { background:linear-gradient(90deg,rgba(71,85,105,1),rgba(100,116,139,1)); }
.toast[data-type="success"] { --accent:34,197,94; }
.toast[data-type="success"] .toast-bar { background:linear-gradient(90deg,rgba(34,197,94,1),rgba(52,211,153,1)); }
.toast[data-type="error"] { --accent:220,38,38; }
.toast[data-type="error"] .toast-bar { background:linear-gradient(90deg,rgba(220,38,38,1),rgba(239,68,68,1)); }
@keyframes toastIn { from { opacity:0; transform:translateY(12px) scale(.96);} to { opacity:1; transform:translateY(0) scale(1);} }
@keyframes toastBar { from { width:100%; } to { width:0%; } }

@media (prefers-color-scheme: dark) {
  .draft-itinerary-banner { background:linear-gradient(145deg, rgba(30,41,59,0.85), rgba(15,23,42,0.8)); border-color:rgba(255,255,255,0.08); color:#f1f5f9; }
  .view-draft-btn { background:linear-gradient(145deg,#334155,#1e293b); }
  .toast { background:linear-gradient(140deg, rgba(30,41,59,0.9), rgba(15,23,42,0.75)); border-color:rgba(255,255,255,0.08); }
  .toast-message { color:#f1f5f9; }
  .toast-close { background:rgba(255,255,255,0.08); color:#cbd5e1; }
  .toast-close:hover { background:rgba(255,255,255,0.16); }
}
